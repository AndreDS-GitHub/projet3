<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>
	<form id="login">
		<input type="text" id="username" name="username" placeholder="Your username"/>
		<input type="password" id="password" name="password" placeholder="Your password"/>
		<input type="submit" id="signin" name="connect" value="Sign in"/>
	</form>
</body>


<script>
	const moduleUser = require('../../js/modules/User.js');

	function checkConnection(result, password) {
		if(Array.isArray(result) && result.length === 1) {
			if (password === result[0]["password"]) window.location.assign('index2.html');
		}
	}

	document.getElementById('login').addEventListener('submit', (e) => {
		e.preventDefault();
		const formData = new FormData(e.target);

		const username = formData.get("username");
		const password = formData.get("password");

		if(username !== "" && password !== "") { 
			let user = moduleUser.getByUsername(username, checkConnection, password);
		}
	}, false);
</script>
</html>
